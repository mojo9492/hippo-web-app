"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[369],{1369:function(e,t,l){l.r(t),l.d(t,{default:function(){return me}});var a=l(3396);const n={class:"home"};function u(e,t,l,u,o,i){const r=(0,a.up)("LogMain");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a.Wm)(r)])}var o=l(4870),i=l(7139),r=l(9242),d=l(7627);const s=e=>((0,a.dD)("data-v-1c9459b8"),e=e(),(0,a.Cn)(),e),v={id:"container"},p=(0,a.Uk)(" Date: "),c={class:"postForm-date"},m=s((()=>(0,a._)("label",{for:"month"},"Month",-1))),b=["default","disabled"],h=(0,a.uE)('<option value="0" data-v-1c9459b8>Janurary</option><option value="1" data-v-1c9459b8>Feburary</option><option value="2" data-v-1c9459b8>March</option><option value="3" data-v-1c9459b8>April</option><option value="4" data-v-1c9459b8>May</option><option value="5" data-v-1c9459b8>June</option><option value="6" data-v-1c9459b8>July</option><option value="7" data-v-1c9459b8>August</option><option value="8" data-v-1c9459b8>September</option><option value="9" data-v-1c9459b8>October</option><option value="10" data-v-1c9459b8>November</option><option value="11" data-v-1c9459b8>December</option>',12),w=[h],y=s((()=>(0,a._)("label",{for:"day"},"Day",-1))),_=["disabled"],g=s((()=>(0,a._)("label",{for:"year"},"Year",-1))),k=["disabled"],f=(0,a.Uk)(" Time: "),D={class:"postForm-time"},U=s((()=>(0,a._)("label",{for:"hour"},"Hour",-1))),H=["disabled"],T=(0,a.Uk)(" : "),S=s((()=>(0,a._)("label",{for:"minute"},"Minute",-1))),E=["disabled"],$={class:"postForm-now-input"},M=(0,a.Uk)(" Now "),V=(0,a.Uk)(" Uncheck to edit date/time "),A=s((()=>(0,a._)("legend",null,"Blood Sugars and Insulin",-1))),P=(0,a.Uk)(" Blood Sugar Level: "),z=s((()=>(0,a._)("label",{for:"bsl"},null,-1))),C=(0,a.Uk)(" Insulin: "),I=s((()=>(0,a._)("label",{for:"insAmount"},"Amount Given",-1))),F=s((()=>(0,a._)("legend",null,"Blood Pressure",-1))),L=(0,a.Uk)("  /  "),N=(0,a.Uk)(" Weight: "),W=(0,a.Uk)(" Remarks: "),Z=s((()=>(0,a._)("button",{type:"submit"},"Add Entry",-1))),j={id:"htable-container"},B={class:"htable"},J=s((()=>(0,a._)("tr",{class:"htable-header"},[(0,a._)("th",null,"Date"),(0,a._)("th",null,"Time"),(0,a._)("th",null,"Blood Sugar"),(0,a._)("th",null,"Insulin"),(0,a._)("th",null,"Blood Pressure"),(0,a._)("th",null,"Weight"),(0,a._)("th",null,"Remarks"),(0,a._)("th",null,"Author"),(0,a._)("th",null,"Options")],-1))),O=["onClick"];var R=(0,a.aZ)({props:{authorId:null,authorFirst:null,entries:null},setup(e){const t=e,l=(0,o.iH)(!1),n=new Date,u=(0,o.iH)(n.getMonth()),s=(0,o.iH)(n.getDate()),h=(0,o.iH)(n.getFullYear()),R=(0,o.iH)(n.getHours()),Y=(0,o.iH)(n.getMinutes().toLocaleString("en-US",{minimumIntegerDigits:2})),x=(0,o.iH)(!0),q=(0,o.iH)(""),G=(0,o.iH)(""),K=(0,o.iH)(""),Q=(0,o.iH)(""),X=(0,o.iH)(""),ee=(0,o.iH)(""),te=(0,o.iH)(""),le=()=>{l.value=!l.value},ae=()=>{x.value=!x.value},ne=()=>{let e=n;return x.value||(e=new Date(h.value-1,u.value,s.value,R.value,Number(Y.value))),{date:e,bsl:Number(q.value)??0,insulin:G.value,insAmount:Number(K.value)??0,bloodPressure:`${Q.value}/${X.value}`,weight:Number(ee.value)??0,remarks:te.value,author:d.Z.state.user,authorId:t.authorId}},ue=(e=new Date)=>{const t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=new Date(e);return{date:`${t[l.getDay()]}, ${l.getMonth()+1}/${l.getDate()}`,time:`${l.getHours()}:${l.getMinutes().toLocaleString("en-US",{minimumIntegerDigits:2})}`,hours:l.getHours(),minutes:l.getMinutes()}};return(e,n)=>((0,a.wg)(),(0,a.iD)("div",v,[(0,a._)("button",{style:{"margin-bottom":"1em",width:"8em"},onClick:le},(0,i.zw)(l.value?"Show":"Hide")+" Form ",1),l.value?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("form",{key:0,id:"postForm",onSubmit:n[13]||(n[13]=(0,r.iM)((t=>e.$emit("postToAdd",ne())),["prevent"]))},[(0,a._)("label",null,[p,(0,a._)("div",c,[m,(0,a.wy)((0,a._)("select",{id:"month","onUpdate:modelValue":n[0]||(n[0]=e=>u.value=e),default:u.value,disabled:x.value},w,8,b),[[r.bM,u.value]]),y,(0,a.wy)((0,a._)("input",{id:"day",type:"number",inputmode:"numeric","onUpdate:modelValue":n[1]||(n[1]=e=>s.value=e),disabled:x.value},null,8,_),[[r.nr,s.value]]),g,(0,a.wy)((0,a._)("input",{id:"year",type:"number",inputmode:"numeric","onUpdate:modelValue":n[2]||(n[2]=e=>h.value=e),disabled:x.value},null,8,k),[[r.nr,h.value]])])]),(0,a._)("label",null,[f,(0,a._)("div",D,[U,(0,a.wy)((0,a._)("input",{id:"hour",type:"number",inputmode:"numeric","onUpdate:modelValue":n[3]||(n[3]=e=>R.value=e),disabled:x.value},null,8,H),[[r.nr,R.value]]),T,S,(0,a.wy)((0,a._)("input",{id:"minute",type:"number",inputmode:"numeric","onUpdate:modelValue":n[4]||(n[4]=e=>Y.value=e),disabled:x.value},null,8,E),[[r.nr,Y.value]])])]),(0,a._)("label",$,[M,(0,a._)("div",null,[(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":n[5]||(n[5]=e=>x.value=e),onClick:ae},null,512),[[r.e8,x.value]])]),V]),(0,a._)("fieldset",null,[A,(0,a._)("label",null,[P,z,(0,a.wy)((0,a._)("input",{type:"number",inputmode:"numeric","onUpdate:modelValue":n[6]||(n[6]=e=>q.value=e),placeholder:"Enter blood sugar level..."},null,512),[[r.nr,q.value]])]),(0,a._)("label",null,[C,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":n[7]||(n[7]=e=>G.value=e),placeholder:"Enter insulin name..."},null,512),[[r.nr,G.value]]),I,(0,a.wy)((0,a._)("input",{id:"insAmount",type:"number",inputmode:"numeric","onUpdate:modelValue":n[8]||(n[8]=e=>K.value=e),placeholder:"Enter amount..."},null,512),[[r.nr,K.value]])])]),(0,a._)("fieldset",null,[F,(0,a.wy)((0,a._)("input",{type:"number",inputmode:"numeric","onUpdate:modelValue":n[9]||(n[9]=e=>Q.value=e),placeholder:"Enter top #..."},null,512),[[r.nr,Q.value]]),L,(0,a.wy)((0,a._)("input",{type:"number",inputmode:"numeric","onUpdate:modelValue":n[10]||(n[10]=e=>X.value=e),placeholder:"Enter bottom #..."},null,512),[[r.nr,X.value]])]),(0,a._)("label",null,[N,(0,a.wy)((0,a._)("input",{type:"number",inputmode:"numeric","onUpdate:modelValue":n[11]||(n[11]=e=>ee.value=e),placeholder:"Enter weight..."},null,512),[[r.nr,ee.value]])]),(0,a._)("label",null,[W,(0,a.wy)((0,a._)("textarea",{rows:"5",cols:"40","onUpdate:modelValue":n[12]||(n[12]=e=>te.value=e),placeholder:"Enter any additional remarks..."},null,512),[[r.nr,te.value]])]),Z],32)),(0,a._)("div",j,[(0,a._)("table",B,[J,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.entries,(t=>((0,a.wg)(),(0,a.iD)("tr",{class:"htable-entry",key:t.id},[(0,a._)("td",null,(0,i.zw)(ue(t.date).date),1),(0,a._)("td",null,(0,i.zw)(ue(t.date).time),1),(0,a._)("td",null,(0,i.zw)(t.bsl),1),(0,a._)("td",null,(0,i.zw)(t.insulin?.length&&`${t.insulin}: ${t.insAmount}`)+"μ ",1),(0,a._)("td",null,(0,i.zw)(t.bloodPressure&&t.bloodPressure.length>1?t.bloodPressure:""),1),(0,a._)("td",null,(0,i.zw)(t.weight&&t.weight>0&&t.weight),1),(0,a._)("td",null,(0,i.zw)(t.remarks),1),(0,a._)("td",null,(0,i.zw)(t.author?.email),1),(0,a._)("td",null,[(0,a._)("button",{onClick:l=>e.$emit("postToDelete",t.id)},"Remove",8,O)])])))),128))])])]))}}),Y=l(89);const x=(0,Y.Z)(R,[["__scopeId","data-v-1c9459b8"]]);var q=x,G=(l(1703),l(1598));async function K(e){const t=await fetch(`${G.v}/post/${e}`);if(!t.ok)throw new Error("could not find posts");return await t.json()}async function Q(e){const t=await fetch(`${G.v}/post`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error("could not add post: "+e.body)}return await t.json()}async function X(e){const t=await fetch(`${G.v}/post/${e}`,{method:"DELETE"});if(!t.ok){const{body:l}=await t.json(),a=new Error;throw a.name="Delete Post"+e,a.message="could not delete post"+l,a}return await t.json()}var ee=l(65);const te=e=>((0,a.dD)("data-v-782b2bb2"),e=e(),(0,a.Cn)(),e),le={key:0,id:"container"},ae={key:0},ne={key:1},ue={key:2},oe={key:1},ie=te((()=>(0,a._)("h1",null,"Please log in",-1))),re=[ie];var de=(0,a.aZ)({emits:["postToAdd","postToDelete"],setup(e){const t=(0,ee.oR)(),l=(0,o.iH)([]),n=(0,o.iH)(!1),u=(0,o.iH)([]),r=async e=>{const t=await Q(e);t&&(l.value.push(e),l.value.sort(((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())))},d=async e=>{n.value=!0,u.value.push(l.value.find((t=>t.id===e))),l.value=l.value.filter((t=>t.id!==e))},s=async()=>{const e=u.value.pop();l.value.push(e),n.value=!1,u.value.length>0&&setTimeout((()=>n.value=!0),500)},v=async()=>{const e=u.value.pop();u.value.forEach((async e=>{await X(e.id)}));const t=await X(e.id);if(!t)throw t.error;n.value=!1,u.value.pop()};return(0,a.bv)((async()=>{const e=await K(t.state.user.id);l.value=e.sort(((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())),l.value=e})),(0,a.YP)(n,(e=>{e&&setTimeout((()=>{v()}),8e3)})),(e,u)=>(0,o.SU)(t).state.auth?((0,a.wg)(),(0,a.iD)("div",le,[l.value?((0,a.wg)(),(0,a.iD)("h1",ae,"Welcome, "+(0,i.zw)((0,o.SU)(t).state.user.first),1)):((0,a.wg)(),(0,a.iD)("h1",ne,"Welcome back")),(0,a.Wm)(q,{onPostToAdd:r,onPostToDelete:d,"author-id":(0,o.SU)(t).state.user.id,"author-first":(0,o.SU)(t).state.user.first,entries:l.value},null,8,["author-id","author-first","entries"]),n.value?((0,a.wg)(),(0,a.iD)("div",ue,[(0,a._)("button",{class:"undo-button",onClick:s},"Undo?")])):(0,a.kq)("",!0)])):((0,a.wg)(),(0,a.iD)("div",oe,re))}});const se=(0,Y.Z)(de,[["__scopeId","data-v-782b2bb2"]]);var ve=se,pe=(0,a.aZ)({name:"LogView",components:{LogMain:ve}});const ce=(0,Y.Z)(pe,[["render",u]]);var me=ce}}]);
//# sourceMappingURL=369.b30db30e.js.map